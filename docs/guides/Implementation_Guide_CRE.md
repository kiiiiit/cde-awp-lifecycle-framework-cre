# Руководство по внедрению CDE‑AWP фреймворка на объекте CRE (Implementation Guide)

## 1. Предпосылки и состав команды
- **Заказчик / Sponsor**: утверждает цели, KPI, бюджет и политику качества данных
- **Project Manager (PM)**: владелец внедрения, отвечает за сроки, риски и согласование
- **Design Lead / System Engineers (HVAC/EL/BMS)**: классификации ISO 81346, входы/выходы гейтов
- **Procurement Lead / Legal**: каталог закупок (GS1), LCC/TCO критерии, договорные требования к данным
- **Construction PM / Superintendent**: CWP/IWP, готовность фронтов, интерфейсы
- **QA/QC / Cx Lead**: матрица SAT/FAT/INT, PASS/FAIL, журнал дефектов
- **Operations (FM)**: требования as‑maintained, SLA, O&M паспорта
- **BIM/CDE Admin**: настройка CDE, политики доступа, аудит‑лог

## 2. Подготовка CDE и структуры данных
1) Выберите/разверните CDE (Common Data Environment)
- Пространства: Requirements, Design, Procurement, Construction, Commissioning, O&M
- Политики доступа (policies.yaml): роли, права, аудит‑лог

2) Инициализируйте словари и статусы
- Заполните `_data/yaml/iso81346.yaml` — домены и примеры
- Уточните `_data/yaml/status_model.yaml` — статусы документов/пакетов/тестов/дефектов
- Проверьте `_data/yaml/entities.yaml` — обязательные атрибуты сущностей

3) Подготовьте CSV шаблоны (готовы в `_data/csv/`)
- AWP пакеты: `awp_packages.csv`
- Каталог закупок (GS1/LCC): `procurement_catalog.csv`
- Регистры: `interfaces_register.csv`, `documents_register.csv`
- ПНР: `tests_matrix.csv`, `cx_defects_log.csv`
- Готовность систем: `systems_readiness.csv`
- KPI факты: `kpi_facts_weekly.csv`

## 3. Классификация ISO 81346 и мосты GS1
1) Утвердите префикс проекта и объект (пример: `F1`, `BC01`)
2) Сформируйте дерево кодов (ядро, HVAC, EL, BMS и т.д.)
3) Правила именования и уникальности; процедурно оформите пополнение словарей
4) Привяжите GS1 идентификаторы:
- GTIN для позиций закупок
- SSCC для поставок
- GIAI для активов (установленных изделий)
- GLN для локаций/узлов приёмки

## 4. Настройка гейтов (Gate Management, ГОСТ 59799‑2021)
1) Проверьте и адаптируйте `gates.yaml` (входы, выходы, RACI, DQ: completeness/consistency/traceability/legal)
2) Включите правило «no data — no gate» в регламенты и чек‑листы
3) Определите формат заседаний и протоколы решений (minutes, due dates)

## 5. Пакетирование AWP (EWP/CWP/IWP)
1) EWP: перечень комплектующих документов, статус IFB/IFD/IFC, владельцы
2) CWP: границы по ISO 81346, объёмы/ресурсы, зависимости от поставок и интерфейсов
3) IWP: недельные фронты работ (1–2 недели), материалы/инструменты/допуски/HSE/QC
4) Регистры:
- `interfaces_register.csv` — блокеры между функциями
- `awp_packages.csv` — статусы пакетов и готовность к старту

## 6. Закупки и LCC/TCO
1) Каталог `procurement_catalog.csv`: технические атрибуты, LCC‑поля (энергия/сервис), статусы документации (IFB/IFD/IFC)
2) Критерии выбора с весами, оценка TCO/WLC; связь с эксплуатационными KPI
3) Требования к данным поставщиков для загрузки в CDE (O&M паспорта, спецификации)

## 7. ПНР (Commissioning, Cx)
1) Матрица испытаний `tests_matrix.csv`: SAT/FAT/INT, шаги, допуски, PASS/FAIL
2) Журнал дефектов `cx_defects_log.csv`: SLA устранения, ответственные
3) Готовность систем `systems_readiness.csv`: MC‑пакеты, % готовности, критерии MC

## 8. KPI и отчётность
1) KPI факты `kpi_facts_weekly.csv` (еженедельно)
2) Агрегации/KPI отчётность:
```bash
python tools/agg_kpi.py
python tools/calc_readiness.py
python tools/gen_weekly_report.py
```
3) BI: см. `guides/BI_Integration.md` (Power BI/Metabase)

## 9. Политика EIP‑first и DevOps
1) Действия ЖЦ выполняются в ЕИП (EIP) или немедленно протоколируются через API
2) CI/CD:
- Валидации данных: `.github/workflows/validate.yml`
- Сайт документации (MkDocs Pages): `.github/workflows/pages.yml`
- Link‑check (опционально)

## 10. Пилот: шаги и график
1) Неделя 1–2: подготовка CDE, словари ISO 81346/GS1, статусы, гейты, доступы
2) Неделя 3–4: EWP/CWP/IWP шаблоны, регистры интерфейсов, каталог закупок
3) Неделя 5–6: ПНР матрица, критерии MC, запуск KPI отчётности
4) Неделя 7–8: as‑maintained контур, O&M паспорта, интеграция с BI

## 11. Приёмка пилота (Acceptance)
- Комплектность артефактов по чек‑листу
- Непротиворечивость кодов ISO 81346, GS1 мосты
- Связность EWP/CWP/IWP с поставками и системами
- RACI назначено; статусы IFB/IFD/IFC корректны
- KPI отчёты публикуются еженедельно

## 12. Риски и меры
- Размытая ответственность → чёткий RACI и политика доступа
- Неактуальные данные → правило «no data — no gate», аудит‑лог, уведомления
- Слабая связь закупок и эксплуатации → LCC/TCO, обязательные O&M данные
- Срыв готовности фронтов → регистры интерфейсов и «ready_to_start» условия

## 13. Шаблоны и примеры
- Образцы CSV/YAML в `_data/`
- Диаграммы процессов: `docs/diagrams/*`
- One‑Pager: `docs/overview/OnePager_CDE-AWP_Framework.md`
- Техдок: `docs/overview/Technical_Documentation.md`

## 14. Чек‑лист запуска (Checklist)
- [ ] CDE пространства и права доступа созданы
- [ ] ISO 81346 дерево утверждено; GS1 поля согласованы
- [ ] Гейты и чек‑листы настроены; «no data — no gate» закреплено
- [ ] AWP шаблоны развернуты; регистры интерфейсов ведутся
- [ ] Каталог закупок с LCC/TCO заполняется
- [ ] ПНР матрица испытаний и журнал дефектов активны
- [ ] KPI факты и отчёты работают еженедельно
- [ ] O&M паспорта формируются для передачи в эксплуатацию
